<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="ip-ledger-exchange-form" attributes="ledger exchange">
  <template>
    <link rel="stylesheet" href="ip-ledger-exchange-form.css">
    <core-overlay id="overlay" backdrop>
      <form class="form-box" on-submit="{{save}}">
        <input is="core-input" placeholder="Количество" value="{{exchange.amount}}">
        <core-selector valueattr="value" selected="{{exchange.from_currency}}">
          <span value="USD"><i class="fa fa-dollar"></i></span>
          <span value="EUR"><i class="fa fa-eur"></i></span>
        </core-selector>
        <input is="core-input" placeholder="Дата YYYY-mm-dd" value="{{exchange.transferred_at}}">
        <input is="core-input" placeholder="Курс продажи" value="{{exchange.exchange_rate}}">
        <div class="footer">
          <button type="submit" class="button-save">Сохранить</button>
        </div>
      </form>
    </core-overlay>
    <core-ajax
      id="xhrSave"
      url="/api/v1/ledgers/{{ledger.access_token}}/exchanges/"
      params="{{exchange}}"
      method="POST"
      handleAs="json"
      on-core-response="{{handleSaveResponse}}"></core-ajax>
  </template>
  <script src="ip-ledger-exchange-form.js"></script>
</polymer-element>
